(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{35:function(e,t,n){e.exports=n(64)},40:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(13),c=n.n(o),u=(n(40),n(5)),i=n(3),l=n(6),s=function(e){e.type;var t=Object(i.c)((function(e){return e.notification}));return a.a.createElement("div",null,a.a.createElement("h3",null,t))},p=n(34),d=n(1),f=n.n(d),m=n(2),b=n(8),v=n.n(b),g=null,O=function(e){g="bearer ".concat(e)},h=window.localStorage.getItem("loggedTodoAppUser");h&&O(JSON.parse(h).token);var E={getAllMine:function(){var e=Object(m.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:g}},e.next=3,v.a.get("/api/todos",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createOne:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:g}},e.next=3,v.a.post("/api/todos",{title:t},n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteOne:function(e){return v.a.delete("".concat("/api/todos","/").concat(e),{id:e}).then((function(e){return e.data}))},updateOne:function(e){return v.a.patch("".concat("/api/todos","/").concat(e.id),e).then((function(e){return e.data}))},setToken:O},x=function(){return function(){var e=Object(m.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.getAllMine();case 2:n=e.sent,t({type:"INIT_TODOS",todos:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(m.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E.updateOne(e),n({type:"UPDATE_TODO",todo:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_TODO":return[].concat(Object(p.a)(e),[t.todo]);case"DELETE_TODO":return e.filter((function(e){return e.id!==t.id}));case"UPDATE_TODO":return e.map((function(e){return e.id!==t.todo.id?e:t.todo}));case"CLEAN_LIST":return[];case"INIT_TODOS":return t.todos;default:return e}};function j(){var e=Object(u.a)(["\n  padding: 0.25rem 0.5rem;\n  box-shadow: 1px 2px 10px #ddd;\n  border-radius: 4px;\n  font-weight: 600;\n  background: #eee;\n  border: 1px solid ",";\n  color: ",";\n  text-shadow: ",";\n"]);return j=function(){return e},e}var T=l.a.button(j(),(function(e){return e.important?"#FF007F":"#aaa"}),(function(e){return e.important?"#FF007F":"#222"}),(function(e){return e.important?"0px 0px 1px  #FF007F":""})),k=function(e){var t=e.type,n=e.onClick,r=e.children,o=e.important;return a.a.createElement(T,{important:o,type:t,onClick:n},r)};function S(){var e=Object(u.a)(["\n  border: 1px solid #aaa;\n  padding: 0.25rem 0.5rem;\n"]);return S=function(){return e},e}var A=l.a.input(S()),I=function(e){var t=e.type,n=e.id,r=e.name;return a.a.createElement(A,{type:t,id:n,name:r})},D=function(){var e=Object(i.b)();return a.a.createElement("div",null,a.a.createElement("h2",null,"Add Item"),a.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n,r=window.localStorage.getItem("loggedTodoAppUser");if(r){var a=JSON.parse(r);E.setToken(a.token),e((n=t.target.title.value,function(){var e=Object(m.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.createOne(n);case 2:r=e.sent,console.log("we here?"),t({type:"CREATE_TODO",todo:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),t.target.title.value=""}}},a.a.createElement(I,{name:"title"})," ",a.a.createElement(k,{type:"submit"},"add")))},C=n(12);function F(){var e=Object(u.a)(["\n  border-bottom: 1px solid #ddd;\n  padding: 0.5rem 0;\n\n  /* this is the one grid thing i can use easily lol, other things are hard */\n  display: grid;\n  grid-row-gap: 0.1rem;\n  grid-template-columns: repeat(5, 1fr) 80px;\n  grid-template-areas: 'text text text text text buttons';\n  &:last-child {\n    border-bottom: none;\n  }\n"]);return F=function(){return e},e}var L=l.a.li(F()),N=function(e){var t=e.todo,n=Object(i.b)();return a.a.createElement(L,null,a.a.createElement("p",{style:{gridArea:"text"}},a.a.createElement("input",{type:"checkbox",onChange:function(){n(w(Object(C.a)(Object(C.a)({},t),{},{completed:!t.completed})))},checked:!!t.completed}),t.title)," ",a.a.createElement("div",{style:{gridArea:"buttons"}},a.a.createElement(k,{onClick:function(){var e;n((e=t.id,function(){var t=Object(m.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E.deleteOne(e),n({type:"DELETE_TODO",id:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}},"del")," ",a.a.createElement(k,{important:t.important,onClick:function(){n(w(Object(C.a)(Object(C.a)({},t),{},{important:!t.important})))}},t.important?"!!!":"!")))},U=function(){var e=Object(i.b)();Object(r.useEffect)((function(){e(x())}),[e]);var t=Object(i.c)((function(e){return e.todos}));return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"List"),a.a.createElement("ul",null,t.map((function(e){return a.a.createElement(N,{key:e.id,todo:e},e.title)}))))},_=n(16),J=function(e){return function(){var t=Object(m.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:setTimeout((function(){n({type:"RESET"})}),5e3),n({type:"GIVE",msg:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GIVE":return t.msg;case"RESET":return null;default:return e}},R=function(e){return v.a.post("/api/login",e).then((function(e){return e.data}))},M=function(e){return function(){var t=Object(m.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R(e);case 3:return r=t.sent,window.localStorage.setItem("loggedTodoAppUser",JSON.stringify(r)),E.setToken(r.token),n({type:"LOGIN",user:r}),t.abrupt("return",{});case 10:return t.prev=10,t.t0=t.catch(0),console.log("Error in userreducer: ",t.t0),t.abrupt("return",{error:"Invalid credentials"});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},P={name:"",username:""},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.user;case"LOGOUT":return P;default:return e}},V=function(){var e=Object(i.b)(),t=Object(r.useState)(!1),n=Object(_.a)(t,2),o=n[0],c=n[1],u=Object(r.useState)(),l=Object(_.a)(u,2),s=l[0],p=l[1];Object(r.useEffect)((function(){var t=window.localStorage.getItem("loggedTodoAppUser");if(t){var n=JSON.parse(t),r=n.name,a=n.username;e(M({name:r,username:a})),p(!0)}}),[e]);var d=function(){var t=Object(m.a)(f.a.mark((function t(n){var r,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),r=n.target.username.value,a=n.target.password.value,e(M({username:r,password:a})).then((function(t){if(0===Object.keys(t).length)return e(x()),c(!1),p(!0),e(J("".concat(r," logged in")));e(J(t.error))}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return s?a.a.createElement(k,{onClick:function(){e((window.localStorage.removeItem("loggedTodoAppUser"),E.setToken(null),{type:"LOGOUT"})),e({type:"CLEAN_LIST"}),p(!1)}},"logout"):o?a.a.createElement("form",{onSubmit:d},a.a.createElement("label",{htmlFor:"username"},"Username:"),a.a.createElement(I,{type:"text",id:"username",name:"username"}),a.a.createElement("br",null),a.a.createElement("label",{htmlFor:"password"},"Password:"),a.a.createElement(I,{type:"password",id:"password",name:"password"}),a.a.createElement("br",null),a.a.createElement(k,{type:"submit"},"login"),a.a.createElement(k,{type:"button",onClick:function(){return c(!o)}},"cancel")):a.a.createElement(k,{type:"button",onClick:function(){return c(!o)}},"login")};function B(){var e=Object(u.a)(["\n  padding: 0.5rem 1rem;\n"]);return B=function(){return e},e}function W(){var e=Object(u.a)(["\n  background: #dae0f2;\n  border-radius: 15px 15px 0 0;\n  border-bottom: 2px solid #004fff;\n  padding: 0.25rem 1rem;\n  box-shadow: 0px 4px 5px -4px #004fff;\n  text-shadow: 1px 2px 2px #aaa;\n"]);return W=function(){return e},e}function q(){var e=Object(u.a)(["\n  margin: 1rem;\n  background: #fff;\n  max-width: 600px;\n  padding: 0;\n  border-radius: 15px;\n  box-shadow: 0px 5px 10px #000;\n"]);return q=function(){return e},e}var H=l.a.div(q()),K=l.a.h2(W()),Q=l.a.div(B());var X=function(){return Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedTodoAppUser");if(e){var t=JSON.parse(e).token;E.setToken(t)}}),[]),a.a.createElement(H,null,a.a.createElement(K,null,"Todo"),a.a.createElement(Q,null,a.a.createElement(s,null),a.a.createElement(V,null),a.a.createElement(D,null),a.a.createElement(U,null)))},Y=n(7),Z=n(32),$=n(33),ee=Object(Y.createStore)(Object(Y.combineReducers)({todos:y,user:z,notification:G}),Object($.composeWithDevTools)(Object(Y.applyMiddleware)(Z.a)));c.a.render(a.a.createElement(i.a,{store:ee},a.a.createElement(X,null)),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.3cdb1629.chunk.js.map